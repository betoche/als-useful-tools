<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
    <head>
        <meta charset="UTF-8">
        <title>Diagnostic Patch Util</title>
        <link rel="icon" type="image/x-icon" th:href="@{/images/diagnostic-patch-favicon.ico}">
        <link th:href="@{/webjars/bootstrap/5.3.3/css/bootstrap.min.css}" rel="stylesheet" />
        <script th:src="@{/webjars/bootstrap/5.3.3/js/bootstrap.bundle.min.js}" defer></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.0/font/bootstrap-icons.css">
        <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
        <script th:src="@{/js/diagnostic-patch.js}" defer></script>
        <link th:href="@{/css/random.css}" rel="stylesheet" />
    </head>
    <body>
        <div class="vertical-container">
            <div class="vertical fs-2 font-weight-bold">Diagnostic Patch Packer</div>
        </div>
        <div class="container" style="max-width: calc(100% - 60px);">
            <div class="row">
                <div class="col-2">
                    <h5>History</h5>
                    <div class="container">
                        <div class="row">
                            <div class="col-12">
                                <div class="card bg-light mb-3" style="max-width: 18rem;">
                                    <div class="card-header">Header</div>
                                    <div class="card-body">
                                        <h5 class="card-title">Light card title</h5>
                                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                                    </div>
                                </div>
                                <div class="card bg-light mb-3" style="max-width: 18rem;">
                                    <div class="card-header">Header</div>
                                    <div class="card-body">
                                        <h5 class="card-title">Light card title</h5>
                                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                                    </div>
                                </div>
                                <div class="card bg-light mb-3" style="max-width: 18rem;">
                                    <div class="card-header">Header</div>
                                    <div class="card-body">
                                        <h5 class="card-title">Light card title</h5>
                                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-10">
                    <br><br>
                    <!-- <div class="container"> -->
                        <div class="row">
                            <div class="col-12">
                                <form action="/diagnostic-patch/process" method="post" id="diagnostic-patch-form" >
                                    <h5>Add the details of the diagnostic patch.</h5>
                                    <hr>
                                    <div class="form-group row">
                                        <label for="ticket-number" class="col-sm-2 col-form-label">Ticket #:</label>
                                        <div class="col-sm-3">
                                            <input id="ticket-number" class="form-control" name="ticket-number" type="text" th:value="${ticketNumber}">
                                        </div>
                                        <label for="branch-name" class="col-sm-1 col-form-label ">Branch:</label>
                                        <div class="col-sm-6">
                                            <input id="branch-name" class="form-control" name="branch-name" type="text" th:value="${branchName}">
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="project-dir" class="col-sm-2 col-form-label">Project Directory:</label>
                                        <div class="col-sm-6">
                                            <input id="project-dir" class="form-control input-sm" name="project-dir" type="text" th:value="${projectDir}">
                                        </div>
                                        <label for="tce-version" class="col-sm-2 col-form-label">TCE version:</label>
                                        <div class="col-sm-2">
                                            <input id="tce-version" class="form-control" name="tce-number" type="text" th:value="${tceNumber}">
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="jar-files-directory" class="col-sm-2 col-form-label">Jar Files Dir:</label>
                                        <div class="col-sm-10">
                                            <input id="jar-files-directory" class="form-control input-sm" name="jar-files-directory" type="text" th:value="${jarFilesDir}">
                                        </div>
                                    </div>

                                    <div class="form-group row">
                                        <label for="add-file" class="col-sm-2 col-form-label">Add class name:</label>
                                        <div class="col-sm-9">
                                            <input id="add-file" class="form-control" name="add-file" type="text" th:value="${addFile}">
                                        </div>
                                        <div class="col-sm-1">
                                            <button id="add-class" class="btn btn-light fs-7" type="button"><i class="bi bi-plus"></i></button>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-3">
                                            <label class="col-sm-2 col-form-label font-weight-bold">Classes:</label>
                                        </div>
                                        <div class="col-10">
                                            <ul id="class-name-list" name="class-name-list" class="list-group list-group-flush">
                                                <!--
                                                <li class="list-group-item"><span class="class-name">An item</span> <a href="#" class="icon-link"><i class="bi bi-trash"></i></a></li>
                                                <li class="list-group-item"><span class="class-name">A second item</span> <a href="#" class="icon-link"><i class="bi bi-trash"></i></a></li>
                                                <li class="list-group-item"><span class="class-name">A third item</span> <a href="#" class="icon-link"><i class="bi bi-trash"></i></a></li>
                                                <li class="list-group-item"><span class="class-name">A fourth item</span> <a href="#" class="icon-link"><i class="bi bi-trash"></i></a></li>
                                                <li class="list-group-item"><span class="class-name">And a fifth one</span> <a href="#" class="icon-link"><i class="bi bi-trash"></i></a></li>
                                                -->
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="text-center">
                                        <button type="submit" class="btn btn-primary btn-sm">Process Info</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-12 text-center">
                                <h4>Processed Diagnostic Patch</h4>
                            </div>
                        </div>
                        <div class="row" th:if="${patchInfo!=null}">
                            <div class="col-7">
                                <div class="row">
                                    <div class="form-group col-12">
                                        <label for="patch-instructions">Diagnostic Patch Instructions</label>
                                        <textarea class="form-control" id="patch-instructions" name="patch-instructions" rows="10" th:text="${patchInfo.getSuggestedPatchInstructions()}"></textarea>
                                    </div>
                                </div>
                            </div>
                            <div class="col-5">
                                <span class="small" id="zip-file-name" th:text="${patchInfo.getZipFileName()}"></span>
                                <br>
                                <a href="javascript:noAction();" class="icon-link fs-2" onclick="javascript:downloadZipFile();">
                                    <i class="bi bi-cloud-arrow-down-fill"></i>
                                </a>
                            </div>
                        </div>
                        <div class="row" th:if="${patchInfo!=null}">
                            <div class="col-12">
                                <table class="table">
                                    <caption>Available classes for package</caption>
                                    <thead>
                                        <tr>
                                            <th scope="col">Sel</th>
                                            <th scope="col">Class Name</th>
                                            <th scope="col">Jar Name</th>
                                            <th scope="col">Repository Path</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <th:block th:if="${patchInfo!=null && patchInfo.getFoundClassFileList() != null}">
                                            <tr th:each="item, iStat : ${patchInfo.getFoundClassFileList()}">
                                                <th scope="row"><input name="class-to-package" type="checkbox" checked/></th>
                                                <td><small th:text="${item.getClassName()}"></small></td>
                                                <td><small th:text="${item.getJarFileSimpleName()}"></small></td>
                                                <td><small th:text="${item.getClassPath()}" class="file-list-path"></small></td>
                                            </tr>
                                        </th:block>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    <!-- </div> -->
                </div>
            </div>
        </div>
        <script th:inline="javascript" th:unless="${#lists.isEmpty(errorList)}">
            alert([[${errorList}]]);
        </script>
    </body>
</html>